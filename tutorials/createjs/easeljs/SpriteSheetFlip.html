<!doctype html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>XCanvas教程系列——CreateJS 教程——EaselJS: 翻转图片精灵</title>
<meta name="description" content="xcanvas,x-canvas,更快捷地开发html5游戏,html5游戏开发框架,html5游戏开发源代码,html5游戏开发电子书,最酷的html5开发框架,最方便的html5开发框架">
<meta name="keywords" content="xcanvas,x-canvas,xcanvas相关教程,createjs中文教程,createjs入门教程">

<link href="assets/demoStyles.css" rel="stylesheet" type="text/css" />
<link href="../../style.css" rel="stylesheet" type="text/css" />
<link href="../../codemirror/codemirror.css" rel="stylesheet" type="text/css" />
<link href="../../codemirror/ambiance.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="../../codemirror/codemirror.js"></script>
<script type="text/javascript" src="../../codemirror/javascript.js"></script>

<script type="text/javascript" src="../../../src/xc.js"></script>
<script type="text/javascript">
xc.depends([
    "../../../src/core",
    "../../../src/lib/createjs"
], function() {
	var imgSeq = new Image();		//图片精灵对象
	var results;				//需要显示的帧数据
	var imageSrc = "assets/runningGrantSmall.png";

	function init() {
		document.getElementById('origImage').src = imageSrc;

		//等待图片加载完毕
		imgSeq.onload = handleImageLoad;
		imgSeq.src = imageSrc;
	}

	function handleImageLoad() {
	    // 从加载的图片中创建一个新的图片精灵对象，并在里面定义动画序列。例如，{walkUpRight:[0,19]}定义了一组叫“walkUpRight”的
	    // 动画，这个动画会回放0-19帧。
		var spriteSheet  = new createjs.SpriteSheet({
			"animations": {
			    "run": [0, 15]
			},
			"images": ["assets/runningGrantSmall.png"],
			"frames": {
				"regX": 0,
				"regY": 0,
				"width": 51,
				"height": 90,
				"count": 16
			}
		});

        // 把翻转的帧添加到图片精灵上。第二、三、四个参数分别代表需要从水平方向、垂直方向、水平垂直方向翻转帧。
		createjs.SpriteSheetUtils.addFlippedFrames(spriteSheet, true, false, false);

        // 把新创建的图片精灵添加到当前DOM的底部。我们使用一个私有属性“_images”作展示用途。
		document.getElementById("content").appendChild(spriteSheet._images[1]);
	}
    init();
});
</script>
</head>

<body bgcolor="#FFFFFF">
	<center>
		<header id="header" class="EaselJS">
		    <h1><span class="text-product">Easel<strong>JS</strong></span> 翻转图片精灵</h1>
		    <p>测试使用<strong>SpriteSheetUtils.flip()</strong>方法来把一个加载好的图片精灵进行水平翻转操作。
		           上面一排的帧展示的是原始的图片精灵，底部的是生成的。
		    </p>
		</header>
		<div class="content jp-content">
			<div id="content" style="margin-top: 90px; margin-left: 70px; font-weight: bold;">
				原始图片<br/><br/>
				<img id="origImage"><br/><br/><br/>
				附加图片<br/><br/>
			</div>
		</div>
	</center>

	<section id="header" class="EaselJS">
        <center>
            <div class="tutorialMainTitle">主要步骤 及 核心代码</div><br/><br/>
        </center>

        <div class="tutorialBody">
            <div class="tutorialTitle">步骤一：定义变量，并加载一张图片。</div><br />
                <textarea class="tutorialCode" name="code">
var imgSeq = new Image();		//图片精灵对象
var results;				    //需要显示的帧数据
var imageSrc = "assets/runningGrantSmall.png";

imgSeq.onload = handleImageLoad;
imgSeq.src = imageSrc;</textarea>
        </div>

        <div class="tutorialBody">
            <div class="tutorialTitle">步骤二：当图片加载完成时，利用该图片创建一个精灵表数据。</div><br />
                <textarea class="tutorialCode" name="code">
var spriteSheet  = new createjs.SpriteSheet({
	"animations": {
	    "run": [0, 15]
	},
	"images": ["assets/runningGrantSmall.png"],
	"frames": {
		"regX": 0,
		"regY": 0,
		"width": 51,
		"height": 90,
		"count": 16
	}
});</textarea>
        </div>

        <div class="tutorialBody">
            <div class="tutorialTitle">步骤三：把翻转的帧添加到图片精灵上。第二、三、四个参数分别代表需要从水平方向、垂直方向、水平垂直方向翻转帧。</div><br />
                <textarea class="tutorialCode" name="code">
createjs.SpriteSheetUtils.addFlippedFrames(spriteSheet, true, false, false);</textarea>
        </div>
        
        <div class="tutorialBody">
            <div class="tutorialTitle">步骤四：把新创建的图片精灵添加到当前DOM的底部。</div><br />
                <textarea class="tutorialCode" name="code">
document.getElementById("content").appendChild(spriteSheet._images[1]);</textarea>
        </div>
    </section>

<script type="text/javascript" src="../../codemirror/index.js"></script>
</body>
</html>
