<!doctype html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>XCanvas教程系列——CreateJS 教程——EaselJS: 简单的转换示例</title>
<meta name="description" content="xcanvas,x-canvas,更快捷地开发html5游戏,html5游戏开发框架,html5游戏开发源代码,html5游戏开发电子书,最酷的html5开发框架,最方便的html5开发框架">
<meta name="keywords" content="xcanvas,x-canvas,xcanvas相关教程,createjs中文教程,createjs入门教程">

<link href="assets/demoStyles.css" rel="stylesheet" type="text/css" />
<link href="../../style.css" rel="stylesheet" type="text/css" />
<link href="../../codemirror/codemirror.css" rel="stylesheet" type="text/css" />
<link href="../../codemirror/ambiance.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="../../codemirror/codemirror.js"></script>
<script type="text/javascript" src="../../codemirror/javascript.js"></script>

<script type="text/javascript" src="../../../src/xc.js"></script>
<script type="text/javascript">
xc.depends([
    "../../../src/core",
    "../../../src/lib/createjs"
], function() {
    var img;
    var stage;
    var angle;

    function init() {
        angle = 0;
        img = new Image();
        img.onload = handleImageLoad;
        img.src = "assets/rotateDemoBot.png";
    }

    function stop() {
        createjs.Ticker.removeEventListener("tick", tick);
    }

    function handleImageLoad() {
        var canvas = document.getElementById("testCanvas");
        stage = new createjs.Stage(canvas);
        stage.autoClear = true;
        bmp = new createjs.Bitmap(img);
        bmp.regX = img.width >> 1;
        bmp.regY = img.height >> 1;
        bmp.x = canvas.width - (img.width/2)>>1;
        bmp.y = 140+canvas.height - (img.height/2)>>1;
        bmp.scaleX = bmp.scaleY = 0.1;
        stage.addChild(bmp);
        stage.update();

        createjs.Ticker.addEventListener("tick", tick);
    }

    function tick() {
        angle += 0.025;
        var value = (Math.sin(angle) * 360);

        bmp.setTransform (bmp.x , bmp.y , bmp.scaleX , bmp.scaleY , value/2 , bmp.skewX , bmp.skewY , bmp.regX , bmp.regY );
        bmp.scaleX = bmp.scaleY = ((value)/360) + 0.25;
        stage.update();
    }
    
    init();
});
</script>
</head>

<body>
    <center>
        <header id="header" class="EaselJS">
            <h1><span class="text-product">Easel<strong>JS</strong></span> 简单的转换示例</h1>
            <p>一个关于EaselJS转换的简单示例。</p>
        </header>
        <canvas id="testCanvas" width="960" height="400"></canvas>
    </center>

    <section id="header" class="EaselJS">
        <center>
            <div class="tutorialMainTitle">主要步骤 及 核心代码</div><br/><br/>
        </center>

        <div class="tutorialBody">
            <div class="tutorialTitle">步骤一：定义变量，并加载一张图片。</div><br />
                <textarea class="tutorialCode" name="code">
var img;
var stage;
var angle;

function init() {
    angle = 0;
    img = new Image();
    img.onload = handleImageLoad;
    img.src = "assets/rotateDemoBot.png";
}</textarea>
        </div>

        <div class="tutorialBody">
            <div class="tutorialTitle">步骤二：当图片加载完成时，在 canvas 上创建一个 Stage 对象。</div><br />
                <textarea class="tutorialCode" name="code">
var canvas = document.getElementById("testCanvas");
stage = new createjs.Stage(canvas);</textarea>
        </div>

        <div class="tutorialBody">
            <div class="tutorialTitle">步骤三：利用加载的图片对象，创建一个 Bitmap 对象，并设置相关属性，同时添加到 Stage 对象中。</div><br />
                <textarea class="tutorialCode" name="code">
bmp = new createjs.Bitmap(img);
bmp.regX = img.width >> 1;
bmp.regY = img.height >> 1;
bmp.x = canvas.width - (img.width/2)>>1;
bmp.y = 140+canvas.height - (img.height/2)>>1;
bmp.scaleX = bmp.scaleY = 0.1;
stage.addChild(bmp);</textarea>
        </div>
        
        <div class="tutorialBody">
            <div class="tutorialTitle">步骤四：绑定并编写 tick 方法，在 tick 方法中利用 setTransform 方法改变 Bitmap 对象的角度和大小。使得在每个 tick 中，Bitmap 对象的大小和角度都在改变。</div><br />
                <textarea class="tutorialCode" name="code">
createjs.Ticker.addEventListener("tick", tick);

function tick() {
    angle += 0.025;
    var value = (Math.sin(angle) * 360);

    bmp.setTransform (bmp.x , bmp.y , bmp.scaleX , bmp.scaleY , value/2 , bmp.skewX , bmp.skewY , bmp.regX , bmp.regY );
    bmp.scaleX = bmp.scaleY = ((value)/360) + 0.25;
    stage.update();
}</textarea>
        </div>
    </section>

    <p style="text-align: center"> 
        <a title="XCanvas首页" href="http://xc.uc.cn">官网首页</a> &nbsp;
        <a title="XCanvas论坛" href="http://xc.uc.cn/bbs/">论坛首页</a>
    </p>

<script type="text/javascript" src="../../codemirror/index.js"></script>
</body>
</html>